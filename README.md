# HTTP-api для работы с oracledb
Позволяет показывать и редактировать табличные данные

### ***Как запускать:***

(Предварительно нужно заполнить и запустить create_conf.py, section "Oracle"  - данные для подключения бд (Oracle))

1. Активация виртуального окружения:

   Для активации виртуального окружения воспользуйтесь командой (для Linux):

    >source venv/bin/activate

   для Windows команда будет выглядеть так:

    >venv\Scripts\activate.bat

2. Выполняем установку зависимостей:
    >pip install -r requirements.txt

3. запускаем, как flask-приложение:

    >python app.py
 
### **Описание некоторых файлов:**
 
 
 _crutches.py_ - все "костыли", котоыре всплывали в ходе разработки и пока неисправленные (в основоном это обработчики строк).
 
 _settings.ini_ - конфигурация для бд + логин и пароль для Basic_HTTP_authentication.py, который нужно придумать самому
 
 _Basic_HTTP_authentication.py_ (защита логином и паролем закоменчена, но существует для всех запросов, связанных с добавлением/удалением/изменением данных): 
 
           Функция get_password будет по имени пользователя возвращать пароль.

           Функция error_handler будет использоваться чтобы отправить ошибку авторизации, при неправильных данных.
           
### ***Описание API:***

###### GET_requests.py - все GET запросы:


_.../api/v1.0/<scheme>/<table>_ - показать все процессы из любой таблицы в виде json.

Пример:
>$ curl -i http://localhost:5000/api/v1.0/<scheme>/<table>
         <скрин будет позже>
      
_.../api/v1.0/<scheme>/<table>{<column>:[<any_key>]}_  - показать конкретный процесс в виде json. 

Пример:
>$ curl -i http://localhost:5000/api/v1.0/<scheme>/<table>{<column>:[<any_key>]}
        <скрин будет позже>
        
###### POST_requests.py - все POST запросы:


_.../api/v1.0/<scheme>/<table>_ - добавляет новый процесс в любую таблицу, эквивалентен INSERT запросу в бд, необходимо указать минимальные NOT NULL колонки.

Пример:
>$ curl -i -H "Content-Type: application/json" -X POST -d '{"process_id": 1}' http://localhost:5000/api/v1.0/<scheme>/<table>
Добавит в таблицу новый процесс с id = 1, остальные колонки будут равны null
                     <скрин будет позже>


###### PUT_requests.py - все PUT запросы:

_.../api/v1.0/<scheme>/<table>{<column>=<any_key>}_ - 
К сожалению не очень функциональный запрос т.к. запрос UPDATE по структуре может быть сложным. Этот запрос эквиваленте запросу :
      
      UPDATE {scheme}."{table}" SET {final_json} WHERE {column} = {any_key}
      
который находит записи с column = any_key и обновляет любое количество колонок существующей записи

###### DELETE_requests.py - все DELETE запросы:

_.../api/v1.0/<scheme>/<table>{<column>=<any_key>}_  - удаляет любую запись, если это возможно.
Как и с UPDATE-ом, DELETE запрос может быть сложен по структуре, поэтому функционал минимален и равносилен следующему запросу:

      DELETE FROM {scheme}."{table}" WHERE {column} = {any_key}


 
           
           
